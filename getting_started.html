<html><head><title>AckCord: Getting Started</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Katrix" /><meta name="description" content="A Scala Discord library" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="AckCord: Getting Started" /><meta name="title" property="og:title" content="AckCord: Getting Started" /><meta name="og:site_name" content="AckCord" /><meta name="og:url" content="http://ackcord.katsstuff.net" /><meta name="og:type" content="website" /><meta name="og:description" content="A Scala Discord library" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="AckCord: Getting Started" /><meta name="twitter:image" content="/img/poster.png" /><meta name="twitter:description" content="A Scala Discord library" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/default.css" /><link rel="stylesheet" href="/css/style.css" /><link rel="stylesheet" href="/css/palette.css" /><link rel="stylesheet" href="/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"><span>AckCord</span></div></a></li> <li><a href="/getting_started.html" class=" active ">Getting Started</a></li> <li><a href="/docs/cachesnapshot.html" class="">Shared concepts</a> <ul class="sub_section"> <li><a href="/docs/cachesnapshot.html" class="">CacheSnapshot</a></li> <li><a href="/docs/sharedcommands.html" class="">Shared command concepts</a></li></ul></li> <li><a href="/docs/requests.html" class="">Making Requests</a></li> <li><a href="/docs/cache.html" class="">The cache (Advanced)</a></li> <li><a href="/docs/sound.html" class="">Sending custom sound (Advanced)</a></li> <li><a href="/docs/hicommands.html" class="">High level API commands</a></li> <li><a href="/docs/locommands.html" class="">Low level API commands</a></li> <li><a href="/docs/newcommands.html" class="">New incubating commands</a></li> <li><a href="/modules.html" class="">The many modules of AckCord</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/Katrix/AckCord"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/Katrix/AckCord"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="Katrix" data-github-repo="AckCord"><div class="content-wrapper"><section>
<h1 id="ackcord">AckCord</h1>

<p><em>You do what you want, exactly how you want it.</em></p>

<p>AckCord is a Scala library for Discord, using Akka. AckCord’s focus is on letting you choose the level of abstraction you want. Want to work with the raw events from the gateway? Works for that. Maybe you don’t want to bother with any of the underlying implementation and technicalities. Works for that too. Only interested in the REST requests? Pull in that module and ignore the rest.</p>

<p>While AckCord is still in active development, you can try AckCord by adding some of these to your <code class="highlighter-rouge">build.sbt</code> file.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">resolvers</span> <span class="o">+=</span> <span class="nc">Resolver</span><span class="o">.</span><span class="nc">JCenterRepository</span>
<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord"</span>                 <span class="o">%</span> <span class="s">"0.14.0"</span> <span class="c1">//For high level API, includes all the other modules
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord-core"</span>            <span class="o">%</span> <span class="s">"0.14.0"</span> <span class="c1">//Low level core API
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord-commands-core"</span>   <span class="o">%</span> <span class="s">"0.14.0"</span> <span class="c1">//Low to mid level Commands API
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord-lavaplayer-core"</span> <span class="o">%</span> <span class="s">"0.14.0"</span> <span class="c1">//Low level lavaplayer API
</span></code></pre>
</div>

<p>From there on you go with the API you have decided to use.</p>

<h2 id="should-i-use-the-low-level-or-high-level-api">Should I use the low level or high level API?</h2>

<p>It depends on your knowledge with Scala and Akka. If you know what Akka Streams is, and have no problem using it, then I’d say go for the low level API. If you’re familiar with other stream libraries, you might also want to try the low level API. Lastly, if you want to use AckCord the way it was meant to be used, and don’t mind reading up on the documentation for Akka, then again go with the low level API. If none of those apply to you, then go with the high level API.</p>

<h2 id="the-simplest-bot">The simplest bot</h2>

<p>Most of these examples assume these two imports.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">ackcord._</span>
<span class="k">import</span> <span class="nn">ackcord.data._</span>
</code></pre>
</div>

<p>AckCord comes with two (3 if you count handling dispatch events yourself) major APIs. A high level and a low level API. Let’s see how you would log in from both the high level and the low level API.</p>

<p>First we need a token.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">token</span> <span class="k">=</span> <span class="s">"&lt;token&gt;"</span> <span class="c1">//Your Discord token
// token: String = "&lt;token&gt;"
</span></code></pre>
</div>

<p>NOTE: For all codeblocks in this documentation, I’ll comment out all logins as this is real code being run.</p>

<h2 id="logging-in-from-the-high-level-api">Logging in from the high level API</h2>

<p>To use the high level API of AckCord, you create the <code class="highlighter-rouge">ClientSettings</code> you want to use, and call build. This returns a future client. Using that client you can then listen for specific messages and events. Once you have set everything up, you call login.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">//Keep your settings around. It contains useful objects.
</span><span class="k">val</span> <span class="n">clientSettings</span> <span class="k">=</span> <span class="nc">ClientSettings</span><span class="o">(</span><span class="n">token</span><span class="o">)</span>
<span class="c1">// clientSettings: ClientSettings = GatewaySettings(
//   "&lt;token&gt;",
//   100,
//   0,
//   1,
//   None,
//   None,
//   Online,
//   false,
//   true
// )
</span><span class="k">import</span> <span class="nn">clientSettings.executionContext</span>

<span class="k">val</span> <span class="n">futureClient</span> <span class="k">=</span> <span class="n">clientSettings</span><span class="o">.</span><span class="n">createClient</span><span class="o">()</span>
<span class="c1">// futureClient: concurrent.Future[DiscordClient] = Future(&lt;not completed&gt;)
</span>
<span class="n">futureClient</span><span class="o">.</span><span class="n">foreach</span> <span class="o">{</span> <span class="n">client</span> <span class="k">=&gt;</span>
  <span class="n">client</span><span class="o">.</span><span class="n">onEvent</span><span class="o">[</span><span class="kt">cats.Id</span><span class="o">]</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">APIMessage</span><span class="o">.</span><span class="nc">Ready</span><span class="o">(</span><span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Now ready"</span><span class="o">)</span>
    <span class="k">case</span> <span class="k">_</span>                   <span class="k">=&gt;</span>
  <span class="o">}</span>
  
  <span class="c1">//client.login()
</span><span class="o">}</span>
</code></pre>
</div>

<h2 id="logging-in-from-the-low-level-api">Logging in from the low level API</h2>

<p>When working with the low level API, you’re the one responsible for setting stuff up, and knowing how it works.</p>

<p>First we need an actor system.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">akka.actor.ActorSystem</span>
<span class="k">import</span> <span class="nn">akka.stream.scaladsl.Sink</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">system</span><span class="k">:</span> <span class="kt">ActorSystem</span>  <span class="o">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">"AckCord"</span><span class="o">)</span>
<span class="k">import</span> <span class="nn">system.dispatcher</span>
</code></pre>
</div>

<p>Next we create the <code class="highlighter-rouge">Cache</code>, and the <code class="highlighter-rouge">RequestHelper</code>. The <code class="highlighter-rouge">Cache</code> helps you know when stuff happens, and keeps around the changes from old things that have happened. The <code class="highlighter-rouge">RequestHelper</code> helps you make stuff happen. I’d recommend looking into the settings used when creating both the <code class="highlighter-rouge">Cache</code> and <code class="highlighter-rouge">RequestHelper</code> if you want to fine tune your bot.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">cache</span> <span class="k">=</span> <span class="nc">Cache</span><span class="o">.</span><span class="n">create</span>
<span class="k">val</span> <span class="n">requests</span> <span class="k">=</span> <span class="nc">RequestHelper</span><span class="o">.</span><span class="n">create</span><span class="o">(</span><span class="nc">BotAuthentication</span><span class="o">(</span><span class="n">token</span><span class="o">))</span>
</code></pre>
</div>

<p>Now that we have all the pieces we want, we can create our event listener. In the low level API, events are represented as a <code class="highlighter-rouge">Source</code> you can materialize as many times as you want.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">cache</span><span class="o">.</span><span class="n">subscribeAPI</span><span class="o">.</span><span class="n">collect</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">APIMessage</span><span class="o">.</span><span class="nc">Ready</span><span class="o">(</span><span class="n">c</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">c</span>
<span class="o">}.</span><span class="n">to</span><span class="o">(</span><span class="nc">Sink</span><span class="o">.</span><span class="n">foreach</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Now ready"</span><span class="o">))).</span><span class="n">run</span><span class="o">()</span>
</code></pre>
</div>

<p>Finally we can create our <code class="highlighter-rouge">GatewaySettings</code> and start the shard.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">gatewaySettings</span> <span class="k">=</span> <span class="nc">GatewaySettings</span><span class="o">(</span><span class="n">token</span><span class="o">)</span>
<span class="c1">// gatewaySettings: GatewaySettings = GatewaySettings(
//   "&lt;token&gt;",
//   50,
//   0,
//   1,
//   None,
//   None,
//   Online,
//   false,
//   true
// )
</span><span class="nc">DiscordShard</span><span class="o">.</span><span class="n">fetchWsGateway</span><span class="o">.</span><span class="n">foreach</span> <span class="o">{</span> <span class="n">wsUri</span> <span class="k">=&gt;</span>
 <span class="k">val</span> <span class="n">shard</span> <span class="k">=</span> <span class="nc">DiscordShard</span><span class="o">.</span><span class="n">connect</span><span class="o">(</span><span class="n">wsUri</span><span class="o">,</span> <span class="n">gatewaySettings</span><span class="o">,</span> <span class="n">cache</span><span class="o">,</span> <span class="n">actorName</span> <span class="k">=</span> <span class="s">"DiscordShard"</span><span class="o">)</span>
 <span class="c1">//shard ! DiscordShard.StartShard
</span><span class="o">}</span>
</code></pre>
</div>

<h2 id="access-to-the-low-level-api-from-the-high-level-api">Access to the low level API from the high level API</h2>

<p>Accessing the low level API from the high level API is simple.
The shard actors can be gotten from the <code class="highlighter-rouge">shards</code> method on the <code class="highlighter-rouge">DiscordClient[F]</code>.
The cache can be gotten from the <code class="highlighter-rouge">cache</code> method on the <code class="highlighter-rouge">DiscordClient[F]</code>.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">futureClient</span><span class="o">.</span><span class="n">foreach</span> <span class="o">{</span> <span class="n">client</span> <span class="k">=&gt;</span>
  <span class="k">val</span> <span class="n">shards</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">ActorRef</span><span class="o">]</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">shards</span>
  <span class="k">val</span> <span class="n">cache</span><span class="k">:</span> <span class="kt">Cache</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">cache</span>
<span class="o">}</span>
</code></pre>
</div>

</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/js/main.js"></script></body></html>