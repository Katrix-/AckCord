<html><head><title>AckCord: Getting Started</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Katrix" /><meta name="description" content="A Scala Discord library" /><meta name="og:image" content="/img/poster.png" /><meta name="og:title" content="AckCord: Getting Started" /><meta name="og:site_name" content="AckCord" /><meta name="og:url" content="http://ackcord.katsstuff.net" /><meta name="og:type" content="website" /><meta name="og:description" content="A Scala Discord library" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="AckCord: Getting Started" /><meta name="twitter:image" content="http://ackcord.katsstuff.netimg/poster.png" /><meta name="twitter:description" content="A Scala Discord library" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/default.css" /><link rel="stylesheet" href="/css/style.css" /><link rel="stylesheet" href="/css/palette.css" /><link rel="stylesheet" href="/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"><span>AckCord</span></div></a></li> <li><a href="/getting_started.html" class=" active ">Getting Started</a></li> <li><a href="/docs/cachesnapshot.html" class="">Shared concepts</a> <ul class="sub_section"> <li><a href="/docs/cachesnapshot.html" class="">CacheSnapshot</a></li> <li><a href="/docs/sharedcommands.html" class="">Shared command concepts</a></li></ul></li> <li><a href="/docs/requests.html" class="">Making Requests</a></li> <li><a href="/docs/cache.html" class="">The cache (Advanced)</a></li> <li><a href="/docs/sound.html" class="">Sending custom sound (Advanced)</a></li> <li><a href="/docs/hicommands.html" class="">High level API commands</a></li> <li><a href="/docs/locommands.html" class="">Low level API commands</a></li> <li><a href="/modules.html" class="">The many modules of AckCord</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/Katrix-/AckCord"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/Katrix-/AckCord"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="Katrix-" data-github-repo="AckCord"><div class="content-wrapper"><section><h1 id="ackcord">AckCord</h1>
<p><em>You do what you want, exactly how you want it.</em></p>

<p>AckCord is a Scala library for Discord, using Akka. AckCord’s focus is on letting you choose the level of abstraction you want. Want to work with the raw events from the gateway? Works for that. Maybe you don’t want to bother with any of the underlying implementation and technicalities. Works for that too. Only interested in the REST requests? Pull in that module and ignore the rest.</p>

<p>While AckCord is still in active development, you can try AckCord by adding some of these to your <code class="highlighter-rouge">build.sbt</code> file.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord"</span>                 <span class="o">%</span> <span class="s">"0.10"</span> <span class="c1">//For high level API, includes all the other modules
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord-core"</span>            <span class="o">%</span> <span class="s">"0.10"</span> <span class="c1">//Low level core API
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord-commands-core"</span>   <span class="o">%</span> <span class="s">"0.10"</span> <span class="c1">//Low to mid level Commands API
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"net.katsstuff"</span> <span class="o">%%</span> <span class="s">"ackcord-lavaplayer-core"</span> <span class="o">%</span> <span class="s">"0.10"</span> <span class="c1">//Low level lavaplayer API
</span></code></pre></div></div>

<p>From there on you go with the API you have decided to use.</p>

<p>Most of these examples assume these two imports.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">net.katsstuff.ackcord._</span>
<span class="k">import</span> <span class="nn">net.katsstuff.ackcord.data._</span>
</code></pre></div></div>

<p>AckCord comes with two (3 if you count handling dispatch events yourself) major APIs. A high level and a low level API. Let’s see how you would log in from both the high level and the low level API.</p>

<p>First we need a token.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">token</span> <span class="k">=</span> <span class="s">"&lt;token&gt;"</span> <span class="c1">//Your Discord token
</span><span class="n">token</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>NOTE: For all codeblocks in this documentation, I’ll comment out all logins as this is real code being run.</p>

<h2 id="logging-in-from-the-high-level-api">Logging in from the high level API</h2>

<p>To use the high level API of AckCord, you create the <code class="highlighter-rouge">ClientSettings</code> you want to use, and call build. This returns a future client. Using that client you can then listen for specific messages and events. Once you have set everything up, you call login.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">clientSettings</span> <span class="k">=</span> <span class="nc">ClientSettings</span><span class="o">(</span><span class="n">token</span><span class="o">)</span> <span class="c1">//Keep your settings around. It contains useful objects.
</span><span class="n">clientSettings</span><span class="k">:</span> <span class="kt">net.katsstuff.ackcord.ClientSettings</span> <span class="o">=</span> <span class="nc">GatewaySettings</span><span class="o">(&lt;</span><span class="n">token</span><span class="o">&gt;,</span><span class="mi">100</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="nc">None</span><span class="o">,</span><span class="nc">None</span><span class="o">,</span><span class="nc">Online</span><span class="o">,</span><span class="kc">false</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">clientSettings.executionContext</span>
<span class="k">import</span> <span class="nn">clientSettings.executionContext</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">futureClient</span> <span class="k">=</span> <span class="n">clientSettings</span><span class="o">.</span><span class="n">build</span><span class="o">()</span>
<span class="n">futureClient</span><span class="k">:</span> <span class="kt">scala.concurrent.Future</span><span class="o">[</span><span class="kt">net.katsstuff.ackcord.DiscordClient</span><span class="o">[</span><span class="kt">cats.Id</span><span class="o">]]</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">(&lt;</span><span class="n">not</span> <span class="n">completed</span><span class="o">&gt;)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">futureClient</span><span class="o">.</span><span class="n">foreach</span> <span class="o">{</span> <span class="n">client</span> <span class="k">=&gt;</span>
     <span class="o">|</span>   <span class="n">client</span><span class="o">.</span><span class="n">onEvent</span> <span class="o">{</span>
     <span class="o">|</span>     <span class="k">case</span> <span class="nc">APIMessage</span><span class="o">.</span><span class="nc">Ready</span><span class="o">(</span><span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Now ready"</span><span class="o">)</span>
     <span class="o">|</span>   <span class="o">}</span>
     <span class="o">|</span>   
     <span class="o">|</span>   <span class="c1">//client.login()
</span>     <span class="o">|</span> <span class="o">}</span>
</code></pre></div></div>

<h2 id="logging-in-from-the-low-level-api">Logging in from the low level API</h2>

<p>For the low level API, you need to do most of the setup yourself. That includes creating the actor system, a stream materializer, the cache and the request helper.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">akka.actor.</span><span class="o">{</span><span class="nc">ActorSystem</span><span class="o">,</span> <span class="nc">ActorRef</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">akka.actor.</span><span class="o">{</span><span class="nc">ActorSystem</span><span class="o">,</span> <span class="nc">ActorRef</span><span class="o">}</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">akka.stream.</span><span class="o">{</span><span class="nc">ActorMaterializer</span><span class="o">,</span> <span class="nc">Materializer</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">akka.stream.</span><span class="o">{</span><span class="nc">ActorMaterializer</span><span class="o">,</span> <span class="nc">Materializer</span><span class="o">}</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">akka.stream.scaladsl.Sink</span>
<span class="k">import</span> <span class="nn">akka.stream.scaladsl.Sink</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">implicit</span> <span class="k">val</span> <span class="n">system</span><span class="k">:</span> <span class="kt">ActorSystem</span>  <span class="o">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">"AckCord"</span><span class="o">)</span>
<span class="n">system</span><span class="k">:</span> <span class="kt">akka.actor.ActorSystem</span> <span class="o">=</span> <span class="n">akka</span><span class="o">://</span><span class="nc">AckCord</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">implicit</span> <span class="k">val</span> <span class="n">mat</span><span class="k">:</span> <span class="kt">Materializer</span> <span class="o">=</span> <span class="nc">ActorMaterializer</span><span class="o">()</span>
<span class="n">mat</span><span class="k">:</span> <span class="kt">akka.stream.Materializer</span> <span class="o">=</span> <span class="nc">PhasedFusingActorMaterializer</span><span class="o">(</span><span class="n">akka</span><span class="o">://</span><span class="nc">AckCord</span><span class="o">,</span><span class="nc">ActorMaterializerSettings</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">16</span><span class="o">,,&lt;</span><span class="n">function1</span><span class="o">&gt;,</span><span class="nc">StreamSubscriptionTimeoutSettings</span><span class="o">(</span><span class="nc">CancelTermination</span><span class="o">,</span><span class="mi">5000</span> <span class="n">milliseconds</span><span class="o">),</span><span class="kc">false</span><span class="o">,</span><span class="mi">1000</span><span class="o">,</span><span class="mi">1000</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="nc">IoSettings</span><span class="o">(</span><span class="mi">16384</span><span class="o">)),</span><span class="n">akka</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="nc">Dispatchers</span><span class="k">@</span><span class="mi">7</span><span class="n">e8f108e</span><span class="o">,</span><span class="nc">Actor</span><span class="o">[</span><span class="kt">akka://AckCord/system/StreamSupervisor-</span><span class="err">10</span><span class="k">#</span><span class="err">1430157185</span><span class="o">],</span><span class="kc">false</span><span class="o">,</span><span class="n">akka</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="nc">SeqActorNameImpl</span><span class="k">@</span><span class="mf">45f</span><span class="mi">15</span><span class="n">c2a</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="c1">//import system.dispatcher We use the ExecutionContext imported above for this example too
</span>     <span class="o">|</span> 
     <span class="o">|</span> <span class="k">val</span> <span class="n">cache</span> <span class="k">=</span> <span class="nc">Cache</span><span class="o">.</span><span class="n">create</span> <span class="c1">//The Cache keeps track of all the state, and provides a way to listen to changes in that state
</span><span class="n">cache</span><span class="k">:</span> <span class="kt">net.katsstuff.ackcord.Cache</span> <span class="o">=</span> <span class="nc">Cache</span><span class="o">(</span><span class="nc">Sink</span><span class="o">(</span><span class="nc">SinkShape</span><span class="o">(</span><span class="nc">MergeHub</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="mi">1039512634</span><span class="o">))),</span><span class="nc">Source</span><span class="o">(</span><span class="nc">SourceShape</span><span class="o">(</span><span class="nc">BroadcastHub</span><span class="o">.</span><span class="n">out</span><span class="o">(</span><span class="mi">1586211216</span><span class="o">))),</span><span class="nc">Sink</span><span class="o">(</span><span class="nc">SinkShape</span><span class="o">(</span><span class="nc">MergeHub</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="mi">2051533869</span><span class="o">))),</span><span class="nc">Source</span><span class="o">(</span><span class="nc">SourceShape</span><span class="o">(</span><span class="nc">BroadcastHub</span><span class="o">.</span><span class="n">out</span><span class="o">(</span><span class="mi">1130321268</span><span class="o">))))</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">requests</span> <span class="k">=</span> <span class="nc">RequestHelper</span><span class="o">.</span><span class="n">create</span><span class="o">(</span><span class="nc">BotAuthentication</span><span class="o">(</span><span class="n">token</span><span class="o">))</span> <span class="c1">//The RequestHelper allows us to make REST requests to Discord
</span><span class="n">requests</span><span class="k">:</span> <span class="kt">net.katsstuff.ackcord.http.requests.RequestHelper</span> <span class="o">=</span> <span class="nc">RequestHelper</span><span class="o">(</span><span class="nc">Bot</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;,</span><span class="nc">Actor</span><span class="o">[</span><span class="kt">akka://AckCord/user/$a</span><span class="k">#</span><span class="err">776552647</span><span class="o">],</span><span class="mi">4</span><span class="o">,</span><span class="mi">32</span><span class="o">,</span><span class="nc">Backpressure</span><span class="o">,</span><span class="mi">2</span> <span class="n">minutes</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="c1">//In the low level API, the events are represented as a Source you can materialize as many times you want.
</span>     <span class="o">|</span> <span class="n">cache</span><span class="o">.</span><span class="n">subscribeAPI</span><span class="o">.</span><span class="n">collect</span> <span class="o">{</span>
     <span class="o">|</span>   <span class="k">case</span> <span class="nc">APIMessage</span><span class="o">.</span><span class="nc">Ready</span><span class="o">(</span><span class="n">c</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">c</span>
     <span class="o">|</span> <span class="o">}.</span><span class="n">to</span><span class="o">(</span><span class="nc">Sink</span><span class="o">.</span><span class="n">foreach</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Now ready"</span><span class="o">))).</span><span class="n">run</span><span class="o">()</span>
<span class="n">res4</span><span class="k">:</span> <span class="kt">akka.NotUsed</span> <span class="o">=</span> <span class="nc">NotUsed</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">gatewaySettings</span> <span class="k">=</span> <span class="nc">GatewaySettings</span><span class="o">(</span><span class="n">token</span><span class="o">)</span>
<span class="n">gatewaySettings</span><span class="k">:</span> <span class="kt">net.katsstuff.ackcord.websocket.gateway.GatewaySettings</span> <span class="o">=</span> <span class="nc">GatewaySettings</span><span class="o">(&lt;</span><span class="n">token</span><span class="o">&gt;,</span><span class="mi">100</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="nc">None</span><span class="o">,</span><span class="nc">None</span><span class="o">,</span><span class="nc">Online</span><span class="o">,</span><span class="kc">false</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">DiscordShard</span><span class="o">.</span><span class="n">fetchWsGateway</span><span class="o">.</span><span class="n">foreach</span> <span class="o">{</span> <span class="n">wsUri</span> <span class="k">=&gt;</span>
     <span class="o">|</span>  <span class="k">val</span> <span class="n">shard</span> <span class="k">=</span> <span class="nc">DiscordShard</span><span class="o">.</span><span class="n">connect</span><span class="o">(</span><span class="n">wsUri</span><span class="o">,</span> <span class="n">gatewaySettings</span><span class="o">,</span> <span class="n">cache</span><span class="o">,</span> <span class="s">"DiscordShard"</span><span class="o">)</span>
     <span class="o">|</span>  <span class="c1">//shard ! DiscordShard.StartShard
</span>     <span class="o">|</span> <span class="o">}</span>
</code></pre></div></div>

<h2 id="access-to-the-low-level-api-from-the-high-level-api">Access to the low level API from the high level API</h2>
<p>Accessing the low level API from the high level API is simple.
The shard actors can be gotten from the <code class="highlighter-rouge">shards</code> method on the <code class="highlighter-rouge">DiscordClient[F]</code>.
The cache can be gotten from the <code class="highlighter-rouge">cache</code> method on the <code class="highlighter-rouge">DiscordClient[F]</code>.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">futureClient</span><span class="o">.</span><span class="n">foreach</span> <span class="o">{</span> <span class="n">client</span> <span class="k">=&gt;</span>
     <span class="o">|</span>   <span class="k">val</span> <span class="n">shards</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">ActorRef</span><span class="o">]</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">shards</span>
     <span class="o">|</span>   <span class="k">val</span> <span class="n">cache</span><span class="k">:</span> <span class="kt">Cache</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">cache</span>
     <span class="o">|</span> <span class="o">}</span>
</code></pre></div></div>

</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/js/main.js"></script></body></html>